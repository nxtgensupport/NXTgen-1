function gspbChangeImageByVariationLoop(t,e){let r=e.closest(".gspbgrid_item").querySelector(".gspb-product-featured-image img");if("click"===t){let a=document.getElementsByClassName("gs-var-selector");if(a.length)for(let i=0;i<a.length;i++){let s=a[i].getElementsByClassName("gs-var-label"),n=a[i].getElementsByClassName("gs-var-input");for(let o=0;o<s.length;o++)s[o].classList.remove("gshidden");for(let l=0;l<n.length;l++)n[l].checked=!1}let c=r.getAttribute("data-main-src");c&&(r.setAttribute("src",c),r.setAttribute("srcset",r.getAttribute("data-main-srcset")))}else!function t(e){let a=JSON.parse(e.closest(".gspbgrid_item").querySelector(".variations_form.cart").getAttribute("data-product_variations")),i=e.closest(".gspbgrid_item").querySelector("input.variation_id").getAttribute("value"),s=a.filter(t=>parseInt(t.variation_id)===parseInt(i));if(r){if(s.length){let n=s[0].image.src,o=s[0].image.srcset||"",l=r.getAttribute("src"),c=r.getAttribute("srcset"),d=r.getAttribute("data-main-src");r&&(d||(r.setAttribute("data-main-src",l),r.setAttribute("data-main-srcset",c)),r.setAttribute("src",n),r.setAttribute("srcset",o))}else{let g=r.getAttribute("data-main-src");g&&(r.setAttribute("src",g),r.setAttribute("srcset",r.getAttribute("data-main-srcset")))}}}(e)}jQuery(function(t){if("undefined"==typeof wc_add_to_cart_params)return!1;t(document).on("click",".variations_form .single_add_to_cart_button",function(e){e.preventDefault(),e.stopPropagation(),($variation_form=t(this).closest(".variations_form")).find("input[name=variation_id]").val(),$variation_form.find("input[name=product_id]").val(),$variation_form.find("input[name=quantity]").val(),t(".ajaxerrors").remove();var r={},a=!0;if((variations=$variation_form.find("select[name^=attribute]")).length||(variations=$variation_form.find("[name^=attribute]:checked")),variations.length||(variations=$variation_form.find("input[name^=attribute]")),variations.each(function(){var e,i,s=t(this),n=s.attr("name"),o=s.val();s.removeClass("error"),0===o.length?(e=n.lastIndexOf("_"),i=n.substring(e+1),s.addClass("required error").before('<div class="ajaxerrors redcolor font80">Please select '+i+"</div>"),a=!1):r[n]=o}),!a)return!1;var i=t(this);if(!i.is(".variations_form .single_add_to_cart_button"))return!0;i.removeClass("added"),i.addClass("loading");var s={action:"woocommerce_add_to_cart_variable_gspb"};return $variation_form.serializeArray().map(function(t){if("add-to-cart"!==t.name){if(t.name.endsWith("[]")){let e=t.name.substring(0,t.name.length-2);e in s||(s[e]=[]),s[e].push(t.value)}else s[t.name]=t.value}}),t("body").trigger("adding_to_cart",[i,s]),t.post(wc_add_to_cart_params.ajax_url,s,function(e){if(e){if(e.error&&e.product_url){window.location=e.product_url;return}if("yes"===wc_add_to_cart_params.cart_redirect_after_add){window.location=wc_add_to_cart_params.cart_url;return}t(document.body).trigger("added_to_cart",[e.fragments,e.cart_hash,i])}}),!1})}),document.querySelectorAll(".gspbgrid_item .variations_form.cart").length&&document.querySelectorAll(".gspbgrid_item .variations_form.cart").forEach(t=>{t.addEventListener("change",()=>gspbChangeImageByVariationLoop("change",t))}),document.querySelectorAll(".gspbgrid_item .reset_variations").length&&document.querySelectorAll(".gspbgrid_item .reset_variations").forEach(t=>{t.addEventListener("click",()=>gspbChangeImageByVariationLoop("click",t))});