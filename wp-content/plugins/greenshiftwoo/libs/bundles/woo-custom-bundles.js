jQuery(document).ready(function(t){var a=function(t){var a;!(a=t).is(".processing")&&!a.parents(".processing").length&&t.addClass("processing").block({message:null,overlayCSS:{background:"#fff url("+gspbwoo_bundles.loader_icon+") no-repeat center",opacity:.6}})},o=function(t){t.removeClass("processing").unblock()};function e(){var a=0;return t(".gspbwoo-bundles:first .gspbwoo-bundle-checkbox .product-check").each(function(){t(this).is(":checked")&&""!==t(this).attr("data-price")&&a++}),a}var c=function(){var a=0;return t(".gspbwoo-bundles:first .gspbwoo-bundle-checkbox .product-check").each(function(){t(this).is(":checked")&&""!==t(this).attr("data-price")&&(a+=parseFloat(t(this).attr("data-price")))}),a};function s(a){var o=window.location.toString(),e=a.fragments;a.cart_hash,e&&t.each(e,function(a){t(a).addClass("updating")}),e&&t.each(e,function(a,o){t(a).replaceWith(o)}),t(".shop_table.cart").load(o+" .shop_table.cart:eq(0) > *",function(){t(".shop_table.cart").stop(!0).css("opacity","1").unblock(),t(document.body).trigger("cart_page_refreshed")}),t(".cart_totals").load(o+" .cart_totals:eq(0) > *",function(){t(".cart_totals").stop(!0).css("opacity","1").unblock()})}t("body").on("found_variation",function(a,o){t(".gspbwoo-bundle-checkbox .product-check").each(function(){("variable"==t(this).attr("data-product-type")||"grouped"==t(this).attr("data-product-type"))&&t(this).attr("data-product-id")===a.target.dataset.product_id&&(t(this).attr("data-price",o.display_price),t(this).attr("data-variable-id",o.variation_id),t(this).siblings("span.bundle-price").html(t(o.price_html).html()))})}),t("body").on("found_variation",function(s){a(t("div.gspbwoo-bundles"));var i=c();t.ajax({type:"POST",url:gspbwoo_bundles.ajax_url,data:{action:"bundle_checked_custom_price",price:i},success:function(a){t("span.total-price-html .amount").html(a),t("span.total-products").html(e())},error:function(a,e,c){o(t("div.gspbwoo-bundles")),console.log("AJAX Error:",e,c),console.log("jqXHR:",a)},complete:function(){o(t("div.gspbwoo-bundles"))}})}).trigger("found_variation"),t('.gspbwoo-bundles select[name^="attribute_pa"]').each(function(a){t(this).change(function(){var o=t(this).children("option:selected").val();t('.summary .variations select[name^="attribute_pa"]').eq(a).val(o).trigger("change")})}),t(".gspbwoo-bundle-checkbox .product-check").on("click",function(){a(t("div.gspbwoo-bundles"));var s=c();t.ajax({type:"POST",async:!1,url:gspbwoo_bundles.ajax_url,data:{action:"bundle_checked_custom_price",price:s},success:function(a){t("span.total-price-html .amount").html(a),t("span.total-products").html(e());var o,c=(o=[],t(".gspbwoo-bundles:first .gspbwoo-bundle-checkbox .product-check").each(function(){t(this).is(":checked")||o.push(t(this).attr("data-product-id"))}),o);t(".gspbwoo-bundles .products .gspbwoo-product-outer-main").each(function(){t(this).removeClass("gspb-expired-class");for(var a=0;a<c.length;a++)t(this).hasClass("product-"+c[a])&&t(this).addClass("gspb-expired-class")})},complete:function(){o(t("div.gspbwoo-bundles"))}})}),t(".gspbwoo-bundles-add-all-to-cart .add-all-to-cart").click(function(){var a,o,e=(a=[],t(".gspbwoo-bundles:first .gspbwoo-bundle-checkbox .product-check").each(function(){t(this).is(":checked")&&a.push(t(this).attr("data-product-id"))}),a),c=(o=[],t(".gspbwoo-bundles:first .gspbwoo-bundle-checkbox .product-check").each(function(){t(this).is(":checked")&&("variable"==t(this).attr("data-product-type")||"grouped"==t(this).attr("data-product-type"))&&o.push(t(this).attr("data-product-id"))}),o);if(0===e.length)var i=gspbwoo_bundles.empty;else if(c.length>0&&!1==(!t(".single_add_to_cart_button").is(":disabled")&&""!=t('.gspbwoo-bundles select[name^="attribute_pa"]').val()))var i=gspbwoo_bundles.no_variation;else if(c.length>0&&!1==(!(0===t(".single_add_to_cart_button").length||t(".single_add_to_cart_button").hasClass("disabled")||t(".single_add_to_cart_button").hasClass("wc-variation-is-unavailable"))&&""!=t('.gspbwoo-bundles select[name^="attribute_pa"]').val()))var i=gspbwoo_bundles.not_available;else if(0===c.length&&!1==(!(0===t(".single_add_to_cart_button").length||t(".single_add_to_cart_button").hasClass("disabled"))&&""!=t('.gspbwoo-bundles select[name^="attribute_pa"]').val()))var i=gspbwoo_bundles.not_available;else{for(var n=0;n<e.length;n++){var r=t('input[data-product-id="'+e[n]+'"]').attr("data-variable-id"),d=t('input[data-product-id="'+e[n]+'"]').attr("data-price"),u=t('input[data-product-id="'+e[n]+'"]').attr("data-sub-product"),l=t('input[data-product-id="'+e[n]+'"]').attr("data-discount"),p={};t.ajax({type:"POST",async:!1,url:gspbwoo_bundles.ajax_url,data:{action:"custom_bundles_add_to_cart",product_id:e[n],variation_id:r,variation:p,custom_price:d,sub_product:u,custom_discount:l,bundle_product_ids:e},success:function(t){s(t)}})}var i=gspbwoo_bundles.success}var b=t(this).closest(".gspbwoo-bundles");b.length>0&&b.find(".custom-wc-message").html(i)})});